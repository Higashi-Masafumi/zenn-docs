---
title: アクセスコントロール
---

## アクセス制御とは

![ドコモより](https://storage.googleapis.com/zenn-user-upload/187e79502316-20250721.png)

各パケットやデータに関して、ある境界を通過させるか否かのコントロールを行う機構
（[Firewall](https://www.ntt.com/business/services/network/internet-connect/ocn-business/bocn/knowledge/archive_09.html)や[Intrusion Prevention System](https://www.ntt.com/bizon/glossary/e-i/ips-ids.html)とも呼ばれる）

通信を認めるかどうかの判断材料
- 通信の方向：外向きか内向きか
- 宛先アドレス、送信元アドレス（MacアドレスやIPアドレスやTCP,UDPのポート番号）
- パケットの中身（アプリケーションデータ）
- ドメイン名

### アクセス制御リスト（ACT: Access Control List）
どんな通信を通して、どんな通信は通さないのかというアクセス制御ポリシーのリスト（設定情報）

例：TCP/IPネットワークでの基本のACL

ルール
- 外向きの通信：全て許可する
- 内向き：外向きに始めた通信の返答は許可する、外部に提供するサービスの通信は許可する

```
allow <some ip address> tcp 80 from any
```

実際の通信
- 悪性パケットが通過してしまう例
    - HTTPのwebサーバーに対するSQLインジェクションやXSSやDoS攻撃（アプリケーションレイヤーまでACLでは検証しにくい）
    - 内側のホストからのC&Cサーバーへの接続とそれに対するC&Cサーバーからの指示（外向きの通信は許可しているため）
    - インターネットに対するスキャン
- 良性パケットをブロックしてしまう例
    - サーバーの管理者が外のネットワークからSSHでリモートログインしようとした

[Google CloudのStorage](https://cloud.google.com/storage/docs/access-control/lists?hl=ja)などでも設定可能（基本は通常の権限設定のみを推奨しているが）

### アクセス制御の動的な設定

侵入検知システム(IDS)と連携させることで動的な侵入阻止システムを実現することができる

例：マルウェアに感染したホストがブラックリストIPと通信していることが判明
1.　ブラックリストIPをIPSに設定して、そのホストから外部への通信を遮断する
2.　感染したホスト自体もIPSに設定して外部への通信を遮断する

例：　ホストの動的な切断
不審な通信が内部から観測されたときに発信元のホストのネットワーク上の場所を特定
スイッチ設定やWi-Fiアクセスポイントの設定でホストごと切り離してしまうことも可能

## アクセス制御の運用
侵入阻止は強力であるが、正常な通信にも影響を及ぼしたり、通信の監視によるプライバシーの侵害など負の側面もある

過剰な例：
- 誤検知：通信遮断によって通常業務が停止して経済的損失が生まれる
- 低リスクな通信に対する過大なアクセス制御：
    - マイニングマルウェアなのに通信を遮断させ、業務を停止させてしまう

このように通常業務に支障をきたすので確実に危険な活動と判断された場合以外は、**基本遮断まではしないのが通常の運用**

プライバシー侵害の例：
- Intrusion Detection System(IDS)によって通信を監視すると
    - ある人が組織のネットワークにいた時間
    - どの人がどのようなサイトにアクセスしたか、どのようなコンテンツをやり取りしたか
などの情報が筒抜けになる。